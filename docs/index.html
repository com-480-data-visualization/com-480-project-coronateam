<!DOCTYPE HTML>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
    	<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>Covid-19: Infodemic</title>
		<meta name="description" content="" />
		<meta name="author" content="">
		<meta name="robots" content="noindex">

		<!-- ICON
		<link rel="shortcut icon" href="favicon.ico"/> -->

		<!-- FONTS -->
		<link href='https://fonts.googleapis.com/css?family=Raleway:400,300,700' rel='stylesheet' type='text/css'>
		<link href="https://fonts.googleapis.com/css?family=Montserrat:400,600,800" rel="stylesheet">

		<link rel="stylesheet" href="css/all.css">

		<!-- CSS -->
		<link rel="stylesheet" href="css/bootstrap.min.css">
		<link rel="stylesheet" type="text/css" href="lib/ion.rangeSlider-master/css/ion.rangeSlider.min.css"/>
		<link rel="stylesheet" type="text/css" href="css/main.css"/>
		<link rel="stylesheet" type="text/css" href="css/map.css"/>

		<script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>

	</head>
	<body>
		<!--   Header  -->
		<nav class="navbar navbar-expand-lg navbar-light bg-light" id="topnav">
	        <div class="container-fluid">
	            <a class="navbar-brand" href="#">COVID-19 Infodemic</a>

	            <ul class="navbar-nav mr-auto" id="topnav-links">
			      <li class="nav-item">
			        <a class="nav-link active" href="#">Dashboard</a>
			      </li>
			      <li class="nav-item">
			        <a class="nav-link" href="#">Process Book</a>
			      </li>
			      <li class="nav-item">
			        <a class="nav-link" href="#">About us</a>
			      </li>
			  	</ul>

			  	<a href="#" id="settings-button">
	               <i class="fas fa-bars"></i>
	            </a>
	        </div>
	    </nav>

	    <!-- Map container -->


		<div id="map"><div id="heatmap"></div> </div>

		</div>
		</div>

		<!-- Infos on Europe -->
		<div class="europe-details">
			<div class="header">GENERAL INFORMATIONS</div>

			<div class="parameters">
				<label class="container">Show Tweets HeatMap 
					<i id="tweetHelp" class="fas fa-question-circle" aria-describedby="tooltip"></i>
					<div id="tweetTooltip" role="tooltip">When selected, this option add an HeatMap layer on the vizualisation that represent the density of tweets mentionning coronavirus.</div>
				  <input type="checkbox" checked="checked" id="heatmap_switch">
				  <span class="checkmark"></span>
				</label>

				<label class="container">Show Google Index Score 
					<i id="googleHelp" class="fas fa-question-circle" aria-describedby="tooltip"></i>
					<div id="googleTooltip" role="tooltip">When selected, this option add a Color Scale layer on the vizualisation that represent Google Trend Index of the keyword "coronavirus" in each country/region.</div>
				  <input type="checkbox" checked="checked" id="google_index_switch">
				  <span class="checkmark"></span>
				</label>
			</div>			

			<hr>

			<div class="tab">
				<button class="tablinks" onclick="openTab(event, 'top-5')" id="left-button">Top 5 countries</button>
				<button class="tablinks" onclick="openTab(event, 'solar-plot')" id="right-button">Solar Plot</button>
			</div>
			<div id="top-5" class="tabcontent">
			   <div class="dates"><div><strong>Top 5 countries</strong></div></div>
			</div>

			<div id="solar-plot" class="tabcontent">
		      <div id="solar"></div>
			</div>

		</div>

		<!-- Infos on countries -->
		<div class="country-details">
         	<div class="header">Click on a country for more infos</div>
        </div>

		<!-- dates selector -->
        <div class="wrapper">
        	<div class="dateSliderContainer">
	        	<button class="btn" id="playButton" onclick="testButton()"><i class="fas fa-play"></i></button>
	        	<input type="text" class="js-range-slider" name="dateSlider" value="" />
	        </div>
	    </div>

	</div>

		<!-- Libraries and scripts TODO: put them in local -->
		<script src="lib/jquery-3.4.1.slim.min.js"></script>
		<script src="https://unpkg.com/@popperjs/core@2"></script>
		<script src="lib/d3.min.js"></script>

		<script src="js/colorbrewer.js"></script>
		<script src="js/topojson.js"></script>
		<script src="js/cartogram.js"></script>
		<script src="lib/simpleHeat/simpleheat.js"></script>


		<script src="https://d3js.org/d3-geo-projection.v2.min.js"></script>
		<script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
		<script src="lib/ion.rangeSlider-master/js/ion.rangeSlider.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.3/moment.min.js"></script>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
		<script src="js/map.js"></script>
		<script src="js/infosCountryChart.js"></script>
		<script src="js/solarPlot.js"></script>
		<!-- <script src="js/3d.js"></script> -->
		
		<script type="text/javascript">
			var canvasDrawed = false;
			function openTab(evt, idTab) {
			  // Declare all variables
			  var i, tabcontent, tablinks;

			  // Get all elements with class="tabcontent" and hide them
			  tabcontent = document.getElementsByClassName("tabcontent");
			  for (i = 0; i < tabcontent.length; i++) {
			    tabcontent[i].style.display = "none";
			  }

			  // Get all elements with class="tablinks" and remove the class "active"
			  tablinks = document.getElementsByClassName("tablinks");
			  for (i = 0; i < tablinks.length; i++) {
			    tablinks[i].className = tablinks[i].className.replace(" active", "");
			  }

			  // Show the current tab, and add an "active" class to the button that opened the tab
			  document.getElementById(idTab).style.display = "block";
			  evt.currentTarget.className += " active";


			  ///////////////////////////////////////////
			  /////////////////SOLAR/////////////////////
			  ///////////////////////////////////////////

			  // first is position clockwise, aka angular coordinate, polar angle, or azimuth. range from 0 - 359
			  // second is ring (range 0 to 1), aka Radial Coordinate.
			  // third is node size radius (center to edge)
			 
			  if (idTab == "solar-plot" && !canvasDrawed){
				  var dataCorrelation = [
				    [0, 1, 'Confirmed'],
				    [0, 0.96779387, 'Deaths'],
				    [1.7135959928671598, 0.68897829, 'Trends'],
				    [4.569589314312426, 0.17482298, 'Tweets'],
				    [2.2514747351, 0.49888116, 'Pop'],
				    [3.4271919857343196, -0.32202591, 'Youngs'],
				    [2.284794657156213, 0.52632641, 'GDP'],
				  ]; //will be replaced by data_solar.csv


				  drawSolar(dataCorrelation);//Draw solar plot
				  canvasDrawed = true;
				}
			}

			// Get the element with id="defaultOpen" and click on it
			document.getElementById("left-button").click();
		</script>

		<script type="text/javascript">
			const button = document.querySelector('#tweetHelp');
			const tooltip = document.querySelector('#tweetTooltip');

			Popper.createPopper(button, tooltip, {
			modifiers: [
			  {
			    name: 'offset',
			    options: {
			      offset: [-200, -140],
			    },
			  },
			],
			});

			function show() {
				tooltip.setAttribute('data-show', '');
			}

			function hide() {
				tooltip.removeAttribute('data-show');
			}

			const showEvents = ['mouseenter', 'focus'];
			const hideEvents = ['mouseleave', 'blur'];

			showEvents.forEach(event => {
				button.addEventListener(event, show);
			});

			hideEvents.forEach(event => {
				button.addEventListener(event, hide);
			});


			const button_2 = document.querySelector('#googleHelp');
			const tooltip_2 = document.querySelector('#googleTooltip');

			Popper.createPopper(button_2, tooltip_2, {
			modifiers: [
			  {
			    name: 'offset',
			    options: {
			      offset: [-200, -175],
			    },
			  },
			],
			});

			function show_2() {
				tooltip_2.setAttribute('data-show', '');
			}

			function hide_2() {
				tooltip_2.removeAttribute('data-show');
			}

			const showEvents_2 = ['mouseenter', 'focus'];
			const hideEvents_2 = ['mouseleave', 'blur'];

			showEvents_2.forEach(event => {
				button_2.addEventListener(event, show_2);
			});

			hideEvents_2.forEach(event => {
				button_2.addEventListener(event, hide_2);
			});
		</script>
	</body>
</html>
